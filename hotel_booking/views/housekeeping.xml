<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="housekeeping_filter" model="ir.ui.view">
            <field name="name">housekeeping.select</field>
            <field name="model">hotel.room</field>
            <field name="arch" type="xml">
                <search string="Search Housekeeping">
                    <field name="housekeeper"/>
                    <field name="state"/>
                    <field name="floor_id"/>
                    <field name="name"/>
                    <field name="room_stay_status_id" filter_domain="[('room_stay_status_id','ilike',self)]"/>
                    <field name="booking_id" filter_domain="[('booking_id','ilike',self)]"/>
                    <field name="booking_partner_id" filter_domain="[('booking_partner_id','ilike',self)]"/>
                    <field name="business_source_id" filter_domain="[('business_source_id','ilike',self)]"/>
                    <filter string="Archived" name="inactive" domain="[('active','=',False)]"/>
                    <group expand="0" string="Group By">
                        <filter string="Housekeeper" name="housekeeper" context="{'group_by':'housekeeper'}"/>
                        <filter name="housekeeping_status" string="Housekeeping Status" context="{'group_by':'state'}"/>
                        <separator/>
                        <filter string="Floor" name="floor" context="{'group_by': 'floor_id'}"/>
                        <!--                        <filter string="Room Stayover Status" name="stayover status"-->
                        <!--                                context="{'group_by': 'room_stay_status_id'}"/>-->
                    </group>
                </search>
            </field>
        </record>

        <record id="housekeeping_view_tree" model="ir.ui.view">
            <field name="name">housekeeping_view_tree</field>
            <field name="model">hotel.room</field>
            <field name="arch" type="xml">
                <tree string="housekeeping_tree" editable="bottom" create="0" delete="0"
                      decoration-danger="stay_state_diff == True" js_class="housekeeping_diff_report_list">
                    <header>
                        <button name="button_create_work_orders" type="object"
                                string="Work Orders" class="oe_highlight"
                                attrs="{'always_visible': True}"/>
                        <button name="action_open_pending_orders" type="object"
                                string="Pending Work Orders" class="oe_highlight"
                                attrs="{'always_visible': True}"/>
                        <button name="action_open_complete_orders" type="object"
                                string="Complete Work Orders" class="oe_highlight"
                                attrs="{'always_visible': True}"/>
                        <button name="button_out_of_order" type="object"
                                string="Out Of Order" class="oe_highlight"
                                attrs="{'always_visible': True}"/>
                    </header>
                    <field name="name" readonly="1"/>
                    <field name="housekeeper" widget="many2one_avatar_employee"
                           options="{'no_create': True, 'no_open': True}"/>
                    <field name="out_of_order_from" readonly="1"/>
                    <field name="out_of_order_to" readonly="1"/>
                    <field name="out_of_order_reason" readonly="1"/>
                    <field name="room_type" readonly="1" options="{'no_create': True, 'no_open': True}"/>
                    <field name="booking_id"/>
                    <field name="booking_partner_id"/>
                    <field name="business_source_id"/>
                    <field name="stay_state" readonly="1" options="{'no_create': True, 'no_open': True}"/>
                    <field name="housekeeping_stay_state" options="{'no_create': True, 'no_open': True}"/>
                    <field name="number_of_guests" readonly="1"/>
                    <field name="housekeeping_number_of_guests"/>
                    <field name="stay_state_diff" invisible="1"/>
                    <field name="state" options="{'no_create': True, 'no_open': True}"/>
                </tree>
            </field>
        </record>
        <record id="hr_kanban_view_employees" model="ir.ui.view">
            <field name="name">housekeeping.kanban</field>
            <field name="model">hotel.room</field>
            <field name="priority">10</field>
            <field name="arch" type="xml">
                <kanban class="o_hr_employee_kanban" js_class="hr_employee_kanban" sample="1" quick_create="false"
                        records_draggable="0">
                    <field name="id"/>
                    <field name="name"/>
                    <field name="housekeeper"/>
                    <field name="state"/>
                    <field name="image_128"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click o_kanban_record_has_image_fill o_hr_kanban_record">
                                <field name="avatar_128" widget="image" class="o_kanban_image_fill_left"
                                       options="{'zoom': true, 'zoom_delay': 1000, 'background': true, 'preventClicks': false}"/>

                                <div class="oe_kanban_details">
                                    <div class="o_kanban_record_top">
                                        <div class="o_kanban_record_headings">
                                            <strong class="o_kanban_record_title">
                                                <field name="name" placeholder="Housekeeper's Name"/>
                                            </strong>
                                        </div>
                                    </div>
                                    <ul>
                                        <li class="o_text_overflow">
                                            <field name="housekeeper"/>
                                        </li>
                                        <li class="o_force_ltr">
                                            <field name="state"/>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>
        <record id="action_housekeeping_update_status" model="ir.actions.server">
            <field name="name">Update Status</field>
            <field name="model_id" ref="model_hotel_room"/>
            <field name="binding_model_id" ref="model_hotel_room"/>
            <field name="groups_id" eval="[(4, ref('hotel_booking.group_update_status'))]"/>
            <field name="state">code</field>
            <field name="code">action = records.update_housekeeping_status()</field>
        </record>
        <record id="action_housekeeper_update" model="ir.actions.server">
            <field name="name">Update Housekeeper</field>
            <field name="model_id" ref="model_hotel_room"/>
            <field name="binding_model_id" ref="model_hotel_room"/>
            <field name="groups_id" eval="[(4, ref('hotel_booking.group_update_housekeeper'))]"/>
            <field name="state">code</field>
            <field name="code">action = records.update_housekeeper()</field>
        </record>

        <record id="housekeeping_action" model="ir.actions.act_window">
            <field name="name">Housekeeping</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">hotel.room</field>
            <field name="view_mode">kanban,tree</field>
            <field name="context">{'room_state': 'housekeeping'}</field>
            <field name="view_id" ref="housekeeping_view_tree"/>
            <field name="search_view_id" ref="housekeeping_filter"/>
        </record>

        <menuitem id="housekeeping_root_menu" name="Housekeeping" sequence="55"
                  groups="hotel_booking.housekeeping_group"/>

        <menuitem id="housekeeping_menu" name="Housekeeping" sequence="1" parent="hotel_booking.housekeeping_root_menu"
                  action="housekeeping_action"/>
        <!--        <menuitem id="work_orders_menu" name="Work Orders" parent="hotel_booking.housekeeping_root_menu" sequence="100"-->
        <!--                  groups="hotel_booking.work_orders_group"/>-->
        <!--        <menuitem id="pending_hotel_work_order" name="Pending Work Orders" sequence="1"-->
        <!--                  action="pending_hotel_work_order_action" parent="work_orders_menu"/>-->
        <!--        <menuitem id="complete_hotel_work_order" name="Complete Work Orders" sequence="2"-->
        <!--                  action="complete_hotel_work_order_action" parent="work_orders_menu"/>-->
        <!--        <menuitem id="dashboard_housekeeping_menu" action="ks_dashboard_ninja.board_dashboard_action_window"-->
        <!--                  name="My Dashboard" sequence="1" parent="hotel_booking.housekeeping_root_menu"/>-->
    </data>
</odoo>