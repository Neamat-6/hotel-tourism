<templates>
    <t t-name="hotel_room_availability.RoomAvailability">
        <div class="oe_room_availability_weekly">
          <!-- <button id="search-availability" class="btn btn-primary "  string="Search Availability"/> -->
          <!-- <div class="row">
            <t t-foreach="widget.dates" t-as="date"  >
                  <div class="btn">
                    <t t-esc="moment(date).format('ddd')"/><br/>
                    <t t-esc="moment(date).format('MMM DD')"/>
                  </div>
                </t>
          </div> -->
          
            <table style="overflow-y: auto; max-height: 700px;" class="table table-condensed table-responsive table-striped table-bordered ">
                  <tbody style="overflow-y: auto; max-height: 700px;">
                    <tr class="default-tr" style="position: sticky; top: 0;">
                        <th class="oe_timesheet_first_col " colspan="6"/>
                        <t t-set="day_count" t-value="0"/>
                        <t t-foreach="widget.dates" t-as="date"  >
                            <t t-set="formated_date" t-value="moment(date).format('YYYY-MM-DD')"/>
                              <th   t-if="date" t-att-id="'dom_date_head-'+day_count" t-att-data-date="moment(date).format('YYYY-MM-DD')" t-att-class="'oe_timesheet_weekly_date_head' + (moment().format('DD-MM-YYYY') === moment(date).format('DD-MM-YYYY') ? ' oe_timesheet_weekly_today' : '')">
                                    <t t-esc="moment(date).format('MMM')"/>
                                    <br/>
                                    <t t-esc="moment(date).format('DD')"/>
                                    <br/>
                                    <t t-esc="moment(date).format('ddd')"/>
                                    <br/>
                                    <span class="badge badge-info" >
                                      <t t-set="occupancy" t-value="widget.occupancy[formated_date]*100"/>
                                      <t t-esc="occupancy.toFixed(2) "/> %
                                    </span>
                              </th>
                            <t t-set="day_count" t-value="day_count+1"/>
                        </t>
                        <th class="oe_timesheet_weekly_date_head">Total</th>
                    </tr>
                  </tbody>
                <t t-foreach="widget.rooms_types" t-as="room_type">
                    <tbody class="div_panel">
                        <tr>
                            <td class="accordian_td " t-att-colspan="widget.dates.length+7">
                                <button style="width: 100%;border-radius: 4px !important;background-color: #cbd9da;font-weight: bolder;" class="btn accordian_btn closed_row text-left" type="button" data-toggle="collapse" t-att-data-hotel="room_type.hotel_id[0]"  t-att-data-room_type="room_type.id" t-att-data-target="'#collapseExpand-'+room_type.id" aria-expanded="false" t-att-aria-controls="'collapseExpand-'+room_type.id">
                                    <t t-esc="room_type.name"/>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                    <tbody class="tbody_group collapse" t-att-id="'collapseExpand-'+room_type.id">
                        <tr style="background-color:#D8BFD8;" caption="Contract" class="input-tr contract_tr " t-att-id="'contract_tr-'+room_type.id">
                            <th class="oe_timesheet_weekly_account oe_postion oe_whitesmoke" t-att-id="'contract_caption-'+room_type.id" colspan="6">
                                <span>Total Rooms</span>
                            </th>

                        </tr>
                        <tr style="background-color:#F4D03F;" caption="Booked" class="value-tr booked_tr" t-att-id="'booked_tr-'+room_type.id">
                            <th class="oe_timesheet_weekly_account oe_postion oe_whitesmoke" t-att-id="'booked_caption-'+room_type.id" colspan="6">
                                <span>Booked</span>
                            </th>

                        </tr>
                        <tr style="background-color:#F4C53F;" caption="Out of order" class="value-tr out_of_order_tr" t-att-id="'out_of_order_tr-'+room_type.id">
                            <th class="oe_timesheet_weekly_account oe_postion oe_whitesmoke" t-att-id="'out_of_order_caption-'+room_type.id" colspan="6">
                                <span>Out of order</span>
                            </th>

                        </tr>

                        <tr style="background-color:#ABEBC6;" caption="Available" class="value-tr avail_room_tr" t-att-id="'avail_room_tr-'+room_type.id">
                            <th class="oe_timesheet_weekly_account oe_postion oe_whitesmoke" t-att-id="'avail_caption-'+room_type.id" colspan="6">
                                <span>Available</span>
                            </th>

                        </tr>
                        <tr style="background-color:#abd9eb;" caption="Price" class="value-tr price_tr" t-att-id="'price_tr-'+room_type.id">
                            <th class="oe_timesheet_weekly_account oe_postion oe_whitesmoke" t-att-id="'price_caption-'+room_type.id" colspan="6">
                                <span>Price</span>
                            </th>
                        </tr>
                        <tr style="background-color: mediumturquoise;" caption="Occupancy" class="value-tr occupancy_tr" t-att-id="'occupancy_tr-'+room_type.id">
                            <th class="oe_timesheet_weekly_account oe_postion oe_whitesmoke" t-att-id="'occupancy_tr-'+room_type.id" colspan="6">
                                <span>Occupancy</span>
                            </th>
                        </tr>
                    </tbody>
                </t>
            </table>
        </div>
    </t>
</templates>
