<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="login_form_inherit" inherit_id="web.login">
        <xpath expr="//form" position="before">
            <t t-set="is_login_form" t-value="True"/>
        </xpath>
    </template>
    <template id="signup_inherit" inherit_id="auth_signup.signup" name="OAuth Signup">
        <xpath expr="//form" position="before">
            <t t-set="is_sign_up" t-value="True"/>
        </xpath>
    </template>

    <template id="reset_password_inherit" inherit_id="auth_signup.reset_password" name="OAuth Signup">
        <xpath expr="//form" position="before">
            <t t-set="is_reset_password" t-value="True"/>
        </xpath>
    </template>

    <template id="login_layout_inherit" inherit_id="web.login_layout" priority="1">
        <xpath expr="//div[hasclass('container')]" position="before">
            <t t-call-assets="web._assets_login" t-css="true"/>
            <t t-set="body_classname" t-value="'login_page_'+res_company.os_login_style"/>
            <style t-if="res_company.os_login_background_type=='bg_img' and res_company.os_login_background_image" type="text/css">
                body {
                background-image:url('<t t-esc="'/web/image/res.company/'+str(res_company.id)+'/os_login_background_image'"/>');
                background-size: cover;
                background-repeat: no-repeat;
                background-position: 100%;
                }
            </style>
            <style t-if="res_company.os_login_background_type=='bg_color' and res_company.os_login_background_color" type="text/css">
                body {
                background-color:<t t-esc="res_company.os_login_background_color"/>!important;
                }
            </style>

        </xpath>

        <xpath expr="//div[hasclass('container')]" position="attributes">
            <attribute name="t-if">res_company.os_login_style=='default' or not res_company.os_login_style</attribute>
            <attribute name="class" add="d-flex justify-content-center align-items-center h-100" separator=" "/>
        </xpath>
        <xpath expr="//div[contains(@t-attf-class, 'o_database_list')]" position="attributes">
            <attribute name="t-attf-class" remove="border-0" add="px-0  col-12 col-sm-8 col-md-6 col-xl-4 col-lg-5 mx-auto" separator=" "/>
            <attribute name="style"></attribute>
        </xpath>

        <xpath expr="//div[hasclass('container')]" position="after">
            <t t-if="res_company.os_login_style in ['style_1','style_2','style_3']">
                <t t-set="container_class" t-value="'d-flex justify-content-center align-items-center h-100'"/>
                <t t-set="o_database_list_class" t-value="'px-0 px-5 py-3'"/>
                <div t-attf-class="container py-4 {{ container_class }} login_page">
                    <div t-attf-class="card border  {{login_card_classes}} o_database_list {{ o_database_list_class }}">
                        <div class="card-body">
                            <div t-attf-class="text-left {{'mb-3' if form_small else 'mb-4'}}">
                                <img t-attf-src="/web/image/res.company/{{res_company.id}}/os_theme_logo_dark" t-attf-alt="Logo of {{res_company.name}}" style="max-height:120px; max-width: 200px; width:auto"/>
                            </div>
                            <t t-if="is_sign_up">
                                <h1 class="text-black mb-4">Sign up</h1>
                            </t>
                            <t t-if="is_login_form">
                                <h1 class="text-black mb-4">Sign in</h1>
                            </t>
                            <t t-if="is_reset_password">
                                <h1 class="text-black mb-4">Reset password</h1>
                            </t>
                            <t t-out="0"/>
                            <div class="text-center small mt-2 pt-3 border-top" t-if="not disable_footer">
                                <t t-if="not disable_database_manager">
                                    <a class="border-right pr-2 mr-1" href="/web/database/manager">Manage Databases</a>
                                </t>
                                <a href="https://www.odoo.com?utm_source=db&amp;utm_medium=auth" target="_blank">Powered by
                                    <span>Odoo</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </t>

            <t t-if="res_company.os_login_style in ['style_4','style_5']">
                <t t-set="container_class" t-value="'d-flex justify-content-center align-items-center h-100'"/>
                <t t-set="o_database_list_class" t-value="'px-0 px-5 py-3'"/>
                <style>
                    #wrapwrap{
                    overflow-x: hidden;
                    }
                </style>
                <div class="row no-gutters h-100 overflow-hidden">
                    <div class="col-lg-6 bg-white login_column_1">
                        <t t-set="container_class" t-value="'d-flex justify-content-center align-items-center h-100'"/>
                        <t t-set="o_database_list_class" t-value="'px-0 px-xl-5 py-xl-3 mx-auto'"/>
                        <div t-attf-class="container py-4 {{ container_class }} login_page">
                            <div class="col-md-8 col-lg-8 mx-auto">
                                <div t-attf-class="card border-0 {{login_card_classes}} o_database_list {{ o_database_list_class }}">
                                    <div class="card-body">
                                        <div t-attf-class="text-left {{'mb-3' if form_small else 'mb-4'}}">
                                            <img t-attf-src="/web/image/res.company/{{res_company.id}}/os_theme_logo_dark" t-attf-alt="Logo of {{res_company.name}}" style="max-height:120px; max-width: 200px; width:auto"/>
                                        </div>
                                        <t t-if="is_sign_up">
                                            <h1 class="text-black fw-500 mb-4">Sign up</h1>
                                        </t>
                                        <t t-if="is_login_form">
                                            <h1 class="text-black fw-500 mb-4">Sign in</h1>
                                        </t>
                                        <t t-if="is_reset_password">
                                            <h1 class="text-black fw-500 mb-4">Reset password</h1>
                                        </t>
                                        <t t-out="0"/>
                                        <div class="text-center small mt-2 pt-3 border-top" t-if="not disable_footer">
                                            <t t-if="not disable_database_manager">
                                                <a class="border-right pr-2 mr-1" href="/web/database/manager">Manage Databases</a>
                                            </t>
                                            <a href="https://www.odoo.com?utm_source=db&amp;utm_medium=auth" target="_blank">Powered by
                                                <span>Odoo</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 d-none login_column_2 bg-login-bloc d-lg-flex flex-column justify-content-center position-relative">
                        <div class="position-absolute start-0 w-100 h-100" id="particles-big"/>
                        <t t-call="os_theme_butterfly.shape_1">
                            <t t-set="classes" t-value="'login_shape_1'"/>
                        </t>
                        <t t-call="os_theme_butterfly.shape_2">
                            <t t-set="classes" t-value="'login_shape_2'"/>
                        </t>
                        <t t-call="os_theme_butterfly.shape_3">
                            <t t-set="classes" t-value="'login_shape_3'"/>
                        </t>
                        <t t-call="os_theme_butterfly.shape_4">
                            <t t-set="classes" t-value="'login_shape_4'"/>
                        </t>
                        <div class="content p-2 p-md-5">
                            <h1 class="display-3" t-esc="res_company.os_login_title"></h1>
                            <p class="lead" t-esc="res_company.os_login_subtitle"></p>
                        </div>
                        <script>
                            particlesJS("particles-big",
                            {
                            "particles": {
                            "number": {"value": 5},
                            "color": {"value": ["#bb97f4", "#ffd2d2", "#f2dd40"]},
                            "shape": {"type": ["circle"]},
                            "opacity": {"value": 0.55, "random": true, "anim": {"enable": true, "opacity_min": 0.3, "speed": 0, "sync": true}},
                            "size": {"value": 110, "random": true},
                            "line_linked": {
                            "enable": false,
                            },
                            "move": {
                            "enable": true,
                            "speed": 1,
                            "direction": "right",
                            "random": true,
                            "out_mode": "out",
                            }
                            }, "interactivity": {},
                            "retina_detect": true,
                            "asBG": true
                            });
                        </script>
                    </div>
                </div>
            </t>

            <t t-if="res_company.os_login_style in ['style_6']">
                <t t-set="container_class" t-value="'d-flex justify-content-center align-items-center flex-column h-100'"/>
                <t t-set="o_database_list_class" t-value="'px-0 px-5 py-3'"/>
                <t t-set="body_classname" t-value="'login_style_6'"/>

                <div t-attf-class="container py-4 {{ container_class }} login_page">
                    <div t-attf-class="card border  {{login_card_classes}} o_database_list {{ o_database_list_class }}">
                        <img src="/os_theme_butterfly/static/src/img/login.png" class="d-none d-md-block float_img"/>

                        <div class="card-body">
                            <div t-attf-class="text-left  mb-3">
                                <img t-attf-src="/web/image/res.company/{{res_company.id}}/os_theme_logo_dark" t-attf-alt="Logo of {{res_company.name}}" style="max-height:120px; max-width:200px; width:auto"/>
                            </div>
                            <t t-if="is_sign_up">
                                <h1 class="text-black fw-500 mb-4">Sign up</h1>
                            </t>
                            <t t-if="is_login_form">
                                <h1 class="text-black fw-500 mb-4">Sign in</h1>
                            </t>
                            <t t-if="is_reset_password">
                                <h1 class="text-black fw-500 mb-4">Reset password</h1>
                            </t>
                            <t t-out="0"/>
                            <div class="text-center small mt-2 pt-3 border-top" t-if="not disable_footer">
                                <t t-if="not disable_database_manager">
                                    <a class="border-right pr-2 mr-1" href="/web/database/manager">Manage Databases</a>
                                </t>
                                <a href="https://www.odoo.com?utm_source=db&amp;utm_medium=auth" target="_blank">Powered by
                                    <span>Odoo</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <t t-call="os_theme_butterfly.shape_1">
                    <t t-set="classes" t-value="'login_shape_1'"/>
                </t>
                <t t-call="os_theme_butterfly.shape_2">
                    <t t-set="classes" t-value="'login_shape_2'"/>
                </t>
                <t t-call="os_theme_butterfly.shape_3">
                    <t t-set="classes" t-value="'login_shape_3'"/>
                </t>
                <t t-call="os_theme_butterfly.shape_4">
                    <t t-set="classes" t-value="'login_shape_4'"/>
                </t>
            </t>
        </xpath>

    </template>
</odoo>