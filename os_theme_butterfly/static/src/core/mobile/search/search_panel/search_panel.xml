<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="os_theme_butterfly.SearchPanelMobile" owl="1">
        <t t-if="state.showMobileSearch">
            <Portal target="'body'">
                <div class="o_search_panel o_searchview os_modal_mobile_search">
                    <div class="os_modal_mobile_search_header">
                        <button type="button" class="btn-link btn" t-on-click="state.showMobileSearch = false" title="BACK">
                            <t t-call="os_theme_butterfly.search_back_2"/>
                        </button>
                    </div>
                    <div class="os_mobile_search_wrapper">
                        <t t-call="web.SearchPanel" />
                    </div>
                    <button type="button" class="btn btn-primary btn-block" t-on-click.stop="state.showMobileSearch = false">
                        <t>RESULT</t>
                    </button>
                </div>
            </Portal>
        </t>
        <t t-else="">
            <div class="o_search_panel os_search_panel_content" t-on-click="state.showMobileSearch = true">
                <t t-set="categories" t-value="_getCategories()" />
                <t t-set="filters" t-value="_getFilters()" />
                <div class="d-flex align-items-center">
                    <i class="fa fa-fw fa-filter" />
                    <div class="text-truncate ml-2 mr-auto">
                        <t t-if="!categories.length and !filters.length">All</t>
                        <t t-else="">
                            <t t-foreach="categories" t-as="category" t-key="category.id">
                                <span class="os_search_panel_content_category mr-1">
                                    <i t-if="category.icon"
                                        t-attf-class=" fa {{ category.icon }} mr-1"
                                        t-att-style="category.color and ('color: ' + category.color)"
                                    />
                                    <t t-esc="category.values.join('/')" />
                                </span>
                            </t>
                            <t t-foreach="filters" t-as="filter" t-key="filter.id">
                                <span class="mr-1">
                                    <i t-if="filter.icon"
                                        t-attf-class=" fa {{ filter.icon }} mr-1"
                                        t-att-style="filter.color and ('color: ' + filter.color)"
                                    />
                                    <t t-esc="filter.values.join(', ')" />
                                </span>
                            </t>
                        </t>
                    </div>
                </div>
            </div>
        </t>
    </t>

</templates>
